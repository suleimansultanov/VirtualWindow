function jsonErrorMsgHandler(n,t){var r=n=>"<strong>"+n+"<\/strong>",i=`[${n.status}] `;switch(n.status){case 0:i+="No connect. Verify Network.\n\n";break;case 403:i="Отказано в доступе. \n\n";break;case 404:i+="Requested page not found.\n\n";break;case 500:i+="Internal Server Error.\n\n"}i=r(i);switch(t){case"parsererror":i+="Requested JSON parse failed.";break;case"timeout":i+="Time out error.";break;case"abort":i+="Ajax request aborted.";break;case n.status===403&&"error":i+="У вас недостаточно прав для этой операции.";break;default:i+=`Uncaught Error:
${getErrorMessageByResponse(n)}`}return i}function getErrorMessageByResponse(n){const t=n.responseJSON;return t&&t.error?t.error:n.responseText||n}function bootstrapError(n){n===undefined&&(n="Причина ошибки не ясна");toastr.error(n,"Ошибка")}function bootstrapErrorWithTitle(n,t){t===undefined&&(t=n,n="Ошибка");toastr.error(t,n)}function bootstrapWarning(n,t){toastr.warning(t,n)}function bootstrapAlert(n,t){toastr.info(t,n)}function bootstrapSuccess(n,t){toastr.success(t,n)}function bootstrapConfirmSave(n,t,i){bootstrapConfirm(n,t,i,"Сохранить","Отмена","#1ab394")}function bootstrapConfirmDelete(n,t,i){bootstrapConfirm(n,t,i,"Удалить","Отмена","#dd6b55")}function bootstrapConfirm(n,t,i,r,u,f){swal({title:n,text:t,showCancelButton:!0,confirmButtonColor:f,confirmButtonText:r,cancelButtonText:u,closeOnConfirm:!0},function(){i()})}function showMask(){$("#reference-list").addClass("sk-loading")}function hideMask(){setTimeout(function(){$("#reference-list").removeClass("sk-loading")},300)}function initFilterEvents(){$("body").on("click",".filter-toggle",function(){$(this).next().toggle("show")});$(document).mouseup(function(n){let t=$(".filter-container:visible");if(!t.is(n.target)&&t.has(n.target).length===0){const i=$(n.target);i.hasClass("filter-toggle")&&(t=t.not(i.next()));t.hide("slow")}})}$(document).ready(function(){initFilterEvents()});var ServiceProxy=function(n){this.options=n||{}};ServiceProxy.prototype={_defaultErrorHandler:function(n,t,i){i();n.responseJSON&&n.responseJSON.unauthorized?bootstrapWarning("Внимание","Вы не авторизованы, необходимо войти в систему"):n.responseJSON&&n.responseJSON.error?bootstrapError(n.responseJSON.error):bootstrapError(jsonErrorMsgHandler(n,t))},_post:function(n,t,i,r,u,f,e){var o=this;t||(t={});r||(r=function(n,t){o._defaultErrorHandler(n,t,hideMask)});u();t=typeof t=="string"?t:JSON.stringify(t);jQuery.ajax({type:e,url:n,data:t,contentType:"application/json",success:function(n,t,r){f();n.error?bootstrapError(n.error):i(n,t,r)},error:r})},_postMultipart:function(n,t,i,r,u,f,e){var o=this;r||(r=function(n,t){o._defaultErrorHandler(n,t,hideMask)});u();jQuery.ajax({cache:!1,type:e,data:t,processData:!1,contentType:!1,url:n,success:function(n,t,r){f();n.error?bootstrapError(n.error):i(n,t,r)},error:r})},postJsonResult:function(n,t,i,r){this._post(n,t,function(n,t,r){i(n,t,r)},r,showMask,hideMask,"POST")},postJsonResultCustomMask:function(n,t,i,r,u,f){this._post(i,r,function(n,t,i){u(n,t,i)},f,n,t,"POST")},deleteJsonResult:function(n,t,i,r){this._post(n,t,function(n,t,r){i(n,t,r)},r,showMask,hideMask,"DELETE")},putJsonResult:function(n,t,i,r){this._post(n,t,function(n,t,r){i(n,t,r)},r,showMask,hideMask,"PUT")},postMultipartResult:function(n,t,i,r){this._postMultipart(n,t,function(n,t,r){i(n,t,r)},r,showMask,hideMask,"POST")},putMultipartResult:function(n,t,i,r){this._postMultipart(n,t,function(n,t,r){i(n,t,r)},r,showMask,hideMask,"PUT")},getJsonResult:function(n,t,i,r){this._post(n,t,function(n,t,r){i(n,t,r)},r,showMask,hideMask,"GET")},getJsonResultCustomMask:function(n,t,i,r,u,f){this._post(i,r,function(n,t,i){u(n,t,i)},f,n,t,"GET")},errorHandler:function(n,t){ServiceProxy.prototype._defaultErrorHandler(n,t)}};String.prototype.replaceAll=function(n,t){var i=this;return i.replace(new RegExp(n,"g"),t)};