(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"5975bc15f41192575ea6":function(e,t,r){"use strict";r.r(t);var n=r("d7dd51e1bf6bfc2c9c3d"),o=r("8af190b70a6bc55c6f1b"),a=r.n(o),c=(r("8a2d1b95e05b6a321e74"),r("32486f6b1f4642cc3170")),i=r("ab4cb61bcb2dc161defb"),s=r("d95b0cf107403b178365"),f=r("adc20f99e57c573c589c"),u=r("755d95de3839a630070b"),l="LOAD_LOGS_SUCCESS",d="LOAD_LOGS_ERROR",p="ADD_LOG_SUCCESS",b="LOAD_LOGS";function v(e){return{type:l,logs:e}}function g(e){return{type:d,error:e}}var y=r("2abb2ecfab271efcf057"),m=r.n(y),h=r("f466c6fac21e2bd173f8"),S=r.n(h),w=r("f0d76769f542545382df"),k=r.n(w),O=r("2de20a79156911f204a2"),j=r.n(O),D=r("a289f12938702445a8e7"),L=r.n(D),_=r("ff3fccdf7d553af98930"),R=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,r,n,o){var a=t&&t.defaultProps,c=arguments.length-3;if(r||0===c||(r={}),r&&a)for(var i in a)void 0===r[i]&&(r[i]=a[i]);else r||(r=a||{});if(1===c)r.children=o;else if(c>1){for(var s=Array(c),f=0;f<c;f++)s[f]=arguments[f+3];r.children=s}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}(),M=function(e){var t=e.log;return R(L.a,{},void 0,R(k.a,{component:"th",scope:"row"},void 0,t.get("timestamp")),R(k.a,{},void 0,t.get("level")),R(k.a,{},void 0,t.get("content")))},P=Object(_.defineMessages)({header:{id:"app.components.LogsPage.header",defaultMessage:"This is LogsPage component!"},time:{id:"app.components.LogsPage.time",defaultMessage:"Time"},type:{id:"app.components.LogsPage.type",defaultMessage:"Type"},message:{id:"app.components.LogsPage.message",defaultMessage:"Body"}}),C=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,r,n,o){var a=t&&t.defaultProps,c=arguments.length-3;if(r||0===c||(r={}),r&&a)for(var i in a)void 0===r[i]&&(r[i]=a[i]);else r||(r=a||{});if(1===c)r.children=o;else if(c>1){for(var s=Array(c),f=0;f<c;f++)s[f]=arguments[f+3];r.children=s}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}(),E=function(e){var t=e.logs;return C(m.a,{},void 0,C(j.a,{},void 0,C(L.a,{},void 0,C(k.a,{},void 0,a.a.createElement(_.FormattedMessage,P.time)),C(k.a,{},void 0,a.a.createElement(_.FormattedMessage,P.type)),C(k.a,{},void 0,a.a.createElement(_.FormattedMessage,P.message)))),C(S.a,{},void 0,t.map(function(e){return C(M,{log:e},e.get("orderNumber"))})))},A=r("54f683fcda7806277002");var x=Object(A.fromJS)([]);var J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments[1];switch(t.type){case l:return Object(A.fromJS)(t.logs);case p:var r=Object.assign({},t.log);return r.orderNumber=e.size+1,Object(A.fromJS)([r].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(e)));default:return e}},T=r("91d88adcda98d46895b7"),$=r("45f3bf2b549b62ea5bdf"),G=regeneratorRuntime.mark(N),F=regeneratorRuntime.mark(H);function N(){var e,t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e=u.a+"/api/logs",r.prev=1,r.next=4,Object(T.call)($.a.fetchJson,e);case 4:return t=r.sent,r.next=7,Object(T.put)(v(t));case 7:r.next=13;break;case 9:return r.prev=9,r.t0=r.catch(1),r.next=13,Object(T.put)(g(r.t0));case 13:case"end":return r.stop()}},G,this,[[1,9]])}function H(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(T.takeLatest)(b,N);case 2:case"end":return e.stop()}},F,this)}var U=function(e){return e.get("logs",x)};r.d(t,"mapDispatchToProps",function(){return I});var z=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,r,n,o){var a=t&&t.defaultProps,c=arguments.length-3;if(r||0===c||(r={}),r&&a)for(var i in a)void 0===r[i]&&(r[i]=a[i]);else r||(r=a||{});if(1===c)r.children=o;else if(c>1){for(var s=Array(c),f=0;f<c;f++)s[f]=arguments[f+3];r.children=s}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}(),B=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var W=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.state={socketClient:new WebSocket(u.c)},n.webSocketDidConnect=n.webSocketDidConnect.bind(n),n.webSocketDidReceiveMessage=n.webSocketDidReceiveMessage.bind(n),n.webSocketDidReceiveError=n.webSocketDidReceiveError.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.a.Component),B(t,[{key:"componentDidMount",value:function(){this.props.loadLogs();var e=this.state.socketClient;e.onopen=this.webSocketDidConnect,e.onmessage=this.webSocketDidReceiveMessage,e.onerror=this.webSocketDidReceiveError}},{key:"webSocketDidConnect",value:function(){this.state.socketClient.send('{"H":"PlantHub","A":{"group":"Logs"},"M":"addToGroup"}')}},{key:"webSocketDidReceiveMessage",value:function(e){var t=e.data;"{}"!==t&&this.props.addLog(JSON.parse(t))}},{key:"webSocketDidReceiveError",value:function(e){console.error(e.message)}},{key:"render",value:function(){return z("div",{},void 0,z(E,{logs:this.props.logs}))}}]),t}(),q=Object(c.createStructuredSelector)({logs:Object(c.createSelector)(U,function(e){return e})});function I(e){return{addLog:function(t){return e(function(e){return{type:p,log:e}}(t))},loadLogs:function(){return e({type:b})}}}var K=Object(n.connect)(q,I),Q=Object(s.a)({key:"logs",reducer:J}),V=Object(f.a)({key:"logs",saga:H});t.default=Object(i.compose)(Q,V,K)(W)}}]);